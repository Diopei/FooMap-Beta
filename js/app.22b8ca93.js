(function(){"use strict";var e={712:function(e,o,t){t.d(o,{l:function(){return Bo}});var a={};t.r(a),t.d(a,{l:function(){return Bo}});var i=t(9242),s=t(3396);const n={class:"mobile"};function c(e,o,t,a,i,c){const d=(0,s.up)("HomePage"),l=(0,s.up)("adminPage"),r=(0,s.up)("FoodMap");return(0,s.wg)(),(0,s.iD)("div",n,[i.isHomePage?((0,s.wg)(),(0,s.j4)(d,{key:0,getAllData:i.AllData,onSendActiveData:c.takeActiveData,onGoToAdmin:c.AdminBase},null,8,["getAllData","onSendActiveData","onGoToAdmin"])):i.isAdmin?((0,s.wg)(),(0,s.j4)(l,{key:1,onGoToHome:c.goToHome},null,8,["onGoToHome"])):((0,s.wg)(),(0,s.j4)(r,{key:2,onBackToHome:o[0]||(o[0]=e=>c.backToHome()),sendRoadData:i.picMapRoad,sendColor:i.picFoodColor,sendName:i.picFoodName,sendMapData:i.picFoodMap},null,8,["sendRoadData","sendColor","sendName","sendMapData"]))])}var d=t(7139),l=t.p+"img/arrow.a0a10910.svg";const r=e=>((0,s.dD)("data-v-17175907"),e=e(),(0,s.Cn)(),e),h=(0,s.uE)('<div class="titleBox" data-v-17175907><div class="logoBox" data-v-17175907><h1 data-v-17175907>Hello FooMap</h1><span data-v-17175907>the Food Map Recommendations</span></div><div class="langBox" data-v-17175907><div class="lan" data-v-17175907>zh</div><div class="cy" data-v-17175907>TW</div></div></div>',1),p=["src"],u=r((()=>(0,s._)("img",{src:l,alt:"arrow"},null,-1))),m=[u],g=["src"],v={key:0,class:"alertBox"},k=r((()=>(0,s._)("div",{class:"title"},"警告",-1))),w=r((()=>(0,s._)("div",null,"即將進入後台修改位置",-1))),_={class:"centerBox"};function D(e,o,t,a,i,n){const c=(0,s.up)("swiper-slide"),l=(0,s.up)("swiper");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",{class:(0,d.C_)(["homePage innerHeight",{open:e.intoMap}]),style:(0,d.j5)({height:e.innerHeight+"px","--foodColor":e.isActiveFoodColor})},[(0,s._)("div",{class:(0,d.C_)(["homePageSwiper"]),style:(0,d.j5)({"--foodColor":e.isActiveFoodColor})},[h,(0,s.Wm)(l,{class:"swiper",modules:e.modules,pagination:{clickable:!0,renderBullet:e.bulletRenderer}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.getAllData,((o,t)=>((0,s.wg)(),(0,s.j4)(c,{class:(0,d.C_)(["slide",{"swiper-no-swiping":e.intoMap}]),key:t},{default:(0,s.w5)((({isActive:t})=>[(0,s._)("img",{src:o.foodImg,alt:"food",style:(0,d.j5)({"--innerHeight":e.innerHeight})},null,12,p),(0,s.Uk)(" "+(0,d.zw)(t?e.isActiveFood(o):""),1)])),_:2},1032,["class"])))),128))])),_:1},8,["modules","pagination"])],4),(0,s._)("div",{onClick:o[0]||(o[0]=o=>e.findFood()),class:"homeBack"},m),(0,s._)("div",{onClick:o[1]||(o[1]=o=>e.findFood()),class:(0,d.C_)(["findFoodBtn"]),style:(0,d.j5)({"--foodColor":e.isActiveFoodColor})}," Find the Map ",4),(0,s._)("div",{class:"foodName",style:(0,d.j5)({"--foodColor":e.isActiveFoodColor})},[(0,s._)("div",{onClick:o[2]||(o[2]=o=>e.inToAdmin()),class:"foodName_box"},[(0,s._)("h1",null,(0,d.zw)(e.isActiveFoodName.zh),1),(0,s._)("span",null,(0,d.zw)(e.isActiveFoodName.en),1)])],4),(0,s._)("div",{class:"foodMapSection",style:(0,d.j5)({"--foodColor":e.isActiveFoodColor})},[(0,s.Wm)(l,{class:"swiper",modules:e.modules,"space-between":100,"slides-per-view":3,"centered-slides":!0,loop:!0},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.isActiveFoodMap,((t,a)=>((0,s.wg)(),(0,s.j4)(c,{class:"slide",key:a},{default:(0,s.w5)((({isActive:a})=>[(0,s.Uk)((0,d.zw)(a?e.isActiveRoad(t):"")+" ",1),(0,s._)("div",{onClick:o[3]||(o[3]=o=>e.postActiveData()),class:"roadBox"},[(0,s._)("img",{src:t.img,alt:"road"},null,8,g),(0,s._)("h4",null,(0,d.zw)(t.name),1)])])),_:2},1024)))),128))])),_:1},8,["modules"])],4)],6),10===e.inToadminData?((0,s.wg)(),(0,s.iD)("div",v,[k,w,(0,s._)("div",_,[(0,s._)("div",{class:"btnA",onClick:o[4]||(o[4]=(...o)=>e.backAndToAdmin&&e.backAndToAdmin(...o))},"確定進入"),(0,s._)("div",{class:"btnB",onClick:o[5]||(o[5]=(...o)=>e.inToAdmin&&e.inToAdmin(...o))},"按錯了")])])):(0,s.kq)("",!0)],64)}var f=t(9231),b=t(3461),y=(0,s.aZ)({name:"HomePage",inheritAttrs:!1,components:{Swiper:b.tq,SwiperSlide:b.o5},props:["getAllData"],data(){return{innerHeight:"",intoMap:!1,foodTouch:!0,isActiveFoodColor:"",isActiveFoodName:[],isActiveFoodMap:[],isActiveMapRoad:[],colorArray:"",inToadminData:0}},watch:{},computed:{},methods:{isActiveFood(e){this.isActiveFoodColor=e.foodColor,this.isActiveFoodName=e.foodName,this.isActiveFoodMap=e.section,this.mapTheColor},isActiveRoad(e){this.isActiveMapRoad=e},findFood(){0==this.intoMap?(this.intoMap=!0,this.foodTouch=!1):(this.intoMap=!1,this.foodTouch=!0)},mapTheColor(){this.colorArray=this.getAllData.map((e=>e.foodColor))},postActiveData(){this.$emit("sendActiveData",this.isActiveMapRoad,this.isActiveFoodColor,this.isActiveFoodName,this.isActiveFoodMap)},inToAdmin(){this.inToadminData++,11==this.inToadminData&&(this.inToadminData=0)},backAndToAdmin(){this.inToadminData=0,this.$emit("goToAdmin")}},setup(){const e=(e,o)=>{const t=`${o} bullet-custom-${e+1}`;return`<span class="${t}"></span>`};return{bulletRenderer:e,modules:[f.tl]}},mounted(){this.innerHeight=window.innerHeight,console.log("innerHeight",this.innerHeight)}}),C=t(89);const M=(0,C.Z)(y,[["render",D],["__scopeId","data-v-17175907"]]);var A=M,x=t.p+"img/foodB.0f8519aa.svg";const S=e=>((0,s.dD)("data-v-a34d1170"),e=e(),(0,s.Cn)(),e),R={class:"foodMapTitle"},P=S((()=>(0,s._)("img",{src:l,alt:"arrow"},null,-1))),F={class:"foodName"},I={class:"roadNameBox"},B={class:"name"},H={class:"Ename"},N={class:"road"},T={class:"number"},z={class:"roadItemPoint"},L={key:0,class:"shopPoint"},V={key:0},U=S((()=>(0,s._)("img",{src:x,alt:"foodIcon"},null,-1))),j={class:"foodMapFooterSection"},K={class:"footerTitle"},O={key:1,class:"roadBtnList"},E=["onClick"],$={class:"stationName"},G={class:"name"},Y={class:"ename"},q=S((()=>(0,s._)("img",{src:l,alt:"arrow"},null,-1))),W=[q],Z={class:"footerList"},J={key:0,class:"slideBox"},Q={key:0},X={class:"listItem"},ee=["onClick"],oe=S((()=>(0,s._)("span",null,"點我看步行時間",-1))),te=["onClick"],ae=S((()=>(0,s._)("span",null,"查看資訊",-1))),ie=[ae],se={key:1,class:"noData"},ne=S((()=>(0,s._)("div",{class:"footerAD"},null,-1))),ce={class:"mapBox"},de=["src"];function le(e,o,t,a,i,n){const c=(0,s.up)("swiper-slide"),l=(0,s.up)("swiper");return(0,s.wg)(),(0,s.iD)("div",{class:"foodMapSection",style:(0,d.j5)({height:e.innerHeight+"px","--foodColor":e.sendColor})},[(0,s._)("div",R,[(0,s._)("div",{onClick:o[0]||(o[0]=(...o)=>e.backToHome&&e.backToHome(...o)),class:"backBtn"},[P,(0,s._)("h5",null,(0,d.zw)(e.sendRoadData.name),1)]),(0,s._)("div",F,[(0,s._)("h1",null,(0,d.zw)(e.sendName.zh),1),(0,s._)("h4",null,(0,d.zw)(e.sendName.en),1)])]),(0,s._)("div",{class:"foodMapRoadSection",style:(0,d.j5)({height:e.innerHeight-10+"px","--RoadColor":e.RoadData.MrtColor})},[(0,s.Wm)(l,{id:"scroller",class:"mySwiper",style:(0,d.j5)({height:e.innerHeight-100+"px"}),modules:e.modules,slidesPerView:7,spaceBetween:40,speed:1500,resistanceRatio:0,"free-mode":!0,mousewheel:!0,observer:!0,Virtual:!0,centeredSlides:!0,slideToClickedSlide:!0,direction:"vertical",navigation:"",pagination:{clickable:!0}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.RoadData.station,((o,t)=>((0,s.wg)(),(0,s.j4)(c,{class:"slide",key:t},{default:(0,s.w5)((({isActive:t})=>[(0,s.Uk)((0,d.zw)(t?e.isRoadActive(o):"")+" ",1),(0,s._)("div",I,[(0,s._)("div",B,(0,d.zw)(o.name),1),(0,s._)("div",H,(0,d.zw)(o.ename),1)]),(0,s._)("div",{class:(0,d.C_)(["RoadItemBox",{RoadItemBoxActive:t}])},[(0,s._)("div",N,(0,d.zw)(e.RoadData.MrtName),1),(0,s._)("div",T,(0,d.zw)(o.number),1)],2),(0,s._)("div",z,[o.shop?((0,s.wg)(),(0,s.iD)("div",L,[o.shop.length>1?((0,s.wg)(),(0,s.iD)("span",V,(0,d.zw)(o.shop.length),1)):(0,s.kq)("",!0),U])):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.other,((e,o)=>((0,s.wg)(),(0,s.iD)("div",{key:o,style:(0,d.j5)({borderColor:e.color}),class:"shopPoint"},[(0,s._)("h6",null,(0,d.zw)(e.sign),1)],4)))),128))])])),_:2},1024)))),128))])),_:1},8,["style","modules"])],4),(0,s._)("div",j,[(0,s._)("div",{class:(0,d.C_)(["footerSection",{open:e.isOpenList}])},[(0,s._)("div",K,[e.notPicRoad?((0,s.wg)(),(0,s.iD)("div",{key:0,onClick:o[1]||(o[1]=o=>e.notPicRoad=!e.notPicRoad),class:"roadBtn",style:(0,d.j5)({backgroundColor:e.RoadData.MrtColor})},(0,d.zw)(e.RoadData.MrtName),5)):((0,s.wg)(),(0,s.iD)("div",O,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.sendRoadData.road,((o,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"roadBtnListItem",onClick:t=>e.picTheRoad(o),style:(0,d.j5)({backgroundColor:o.MrtColor}),key:t},(0,d.zw)(o.MrtName),13,E)))),128))])),(0,s._)("div",$,[(0,s._)("div",G,(0,d.zw)(e.isRoadName),1),(0,s._)("div",Y,(0,d.zw)(e.isRoadEname),1)]),(0,s._)("div",{onClick:o[2]||(o[2]=o=>e.clickOpenList()),class:"footerArrow"},W)]),(0,s._)("div",Z,[this.isRoadShop?((0,s.wg)(),(0,s.iD)("div",J,[e.listShow?((0,s.wg)(),(0,s.iD)("div",Q,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.isRoadShop,((o,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"shopListBox",key:t},[(0,s._)("div",X,[(0,s._)("a",{class:"seeMore",onClick:t=>e.EmbeddingMap("directions","",this.isRoadCoordinate,o.shopID)},[(0,s._)("h4",null,(0,d.zw)(o.shopName),1),oe],8,ee),(0,s._)("a",{class:"viewLink",onClick:t=>e.EmbeddingMap("place",o.shopID),href:"#"},ie,8,te)])])))),128))])):(0,s.kq)("",!0)])):((0,s.wg)(),(0,s.iD)("div",se," 抱歉～暫無資料 "))]),ne],2)]),(0,s._)("div",{onClick:o[3]||(o[3]=o=>e.RemoveEmbeddingMap()),id:"emberMap",class:"EmbeddingMap"},[(0,s._)("div",ce,[(0,s._)("iframe",{width:"100%",height:"100%",style:{border:"0"},loading:"lazy",allowfullscreen:"",referrerpolicy:"no-referrer-when-downgrade",src:e.emberSrc},"\n        ",8,de)])])],4)}var re=t(1992),he=(0,s.aZ)({name:"FoodMap",inheritAttrs:!1,components:{Swiper:b.tq,SwiperSlide:b.o5},props:["sendRoadData","sendColor","sendName","sendMapData"],data(){return{innerHeight:"",isMove:!1,notPicRoad:!0,RoadData:[],isRoadName:"",isRoadEname:"",isRoadCoordinate:"",isRoadShop:[],isOpenList:!1,listShow:!1,emberSrc:""}},watch:{},computed:{},methods:{backToHome(){this.$emit("backToHome")},isRoadActive(e){this.isRoadName=e.name,this.isRoadEname=e.ename,this.isRoadShop=e.shop,this.isRoadCoordinate=`${e.lat},${e.lng}`},picTheRoad(e){this.RoadData=e,this.notPicRoad=!this.notPicRoad},clickOpenList(){if(this.isOpenList=!this.isOpenList,0==this.isOpenList){function e(e){e.preventDefault()}document.querySelector("#scroller").removeEventListener("touchmove",e),this.listShow=!1}else{function o(e){e.preventDefault()}document.querySelector("#scroller").addEventListener("touchmove",o),this.lazyloadList()}},lazyloadList(){setTimeout((()=>{this.listShow=!0}),1e3)},replaceImageArray(){this.isRoadShop.forEach((function(e){const o=(0,re.cF)(a["default"]),t=(0,re.iH)(o,"gs://foomap-b6c13.appspot.com/"+e.shopImg);(0,re.Jt)(t).then((o=>{e.shopImg=o}))}))},EmbeddingMap(e,o,t,a){switch(document.getElementById("emberMap").classList.add("active"),e){case"place":this.emberSrc=`https://www.google.com/maps/embed/v1/${e}?key=AIzaSyDCRU1ztRD45a59tYjSxl8sdXEFgq1Cw5E&q=place_id:${o}`;break;case"directions":this.emberSrc=`https://www.google.com/maps/embed/v1/${e}?key=AIzaSyDCRU1ztRD45a59tYjSxl8sdXEFgq1Cw5E&origin=${t}&destination=place_id:${a}&avoid=tolls&mode=walking`;break}},RemoveEmbeddingMap(){document.getElementById("emberMap").classList.remove("active"),this.emberSrc=""}},setup(){return{modules:[f.Gk,f.eZ,f.Rv,f.LW]}},mounted(){function e(e){e.preventDefault()}this.innerHeight=window.innerHeight,this.RoadData=this.sendRoadData.road[0],document.querySelector("#scroller").addEventListener("touchmove",e)}});const pe=(0,C.Z)(he,[["render",le],["__scopeId","data-v-a34d1170"]]);var ue=pe;const me=e=>((0,s.dD)("data-v-670f7222"),e=e(),(0,s.Cn)(),e),ge={class:"adminSection"},ve={key:0,class:"login"},ke=me((()=>(0,s._)("h2",null,"管理者中心",-1))),we={key:1,class:"viewData"},_e=me((()=>(0,s._)("h2",null,"管理者中心",-1))),De={class:"console"},fe={key:0,class:"viewData"},be={key:1,class:"viewData"},ye=me((()=>(0,s._)("p",{class:"updataText"},"更新商店資料請選擇食物->選擇地圖->選擇路線->選擇站點後輸入您需要更新的商店資料",-1))),Ce={class:"form"},Me={class:"inputBox"},Ae=me((()=>(0,s._)("p",null,"選擇更新的食物為:",-1))),xe=["value"],Se={class:"inputBox"},Re=me((()=>(0,s._)("p",null,"選擇更新的地圖為:",-1))),Pe=["value"],Fe={class:"inputBox"},Ie=me((()=>(0,s._)("p",null,"選擇更新的路線為:",-1))),Be=["value"],He={class:"inputBox"},Ne=me((()=>(0,s._)("p",null,"選擇更新的站點為:",-1))),Te=["value"],ze={class:"inputBox input"},Le={class:"inputBox input"},Ve={class:"inputBox input"},Ue=(0,s.Uk)("新增商店Google Map連結:"),je=me((()=>(0,s._)("br",null,null,-1))),Ke={class:"inputBox checkbox"},Oe=me((()=>(0,s._)("label",{for:"checkbox"},"確認資料無誤",-1))),Ee={class:"errorMsg"},$e={class:"inputBox btnBox"},Ge={key:2,class:"viewData"},Ye={key:3,class:"viewData"},qe=me((()=>(0,s._)("p",{class:"updataText"},"更新商店資料請選擇食物->選擇地圖->選擇路線->選擇站點",-1))),We={class:"form"},Ze={class:"inputBox"},Je=me((()=>(0,s._)("p",null,"選擇更新的食物為:",-1))),Qe=["value"],Xe={class:"inputBox"},eo=me((()=>(0,s._)("p",null,"選擇更新的地圖為:",-1))),oo=["value"],to={class:"inputBox"},ao=me((()=>(0,s._)("p",null,"選擇更新的路線為:",-1))),io=["value"],so={class:"inputBox"},no=me((()=>(0,s._)("p",null,"選擇更新的站點為:",-1))),co=["value"],lo={class:"inputBox checkbox"},ro=me((()=>(0,s._)("label",{for:"checkbox2"},"已確定食物及站點選擇",-1))),ho={class:"APIbtnGroup"},po={class:"APIdataList"},uo={class:"APIbtnGroup"},mo={class:"inputBox checkbox"},go=me((()=>(0,s._)("label",{for:"checkbox"},"確認資料無誤",-1))),vo={class:"errorMsg"},ko={class:"inputBox btnBox"};function wo(e,o,t,a,n,c){const l=(0,s.up)("json-viewer");return(0,s.wg)(),(0,s.iD)("div",ge,[0==n.adminPage?((0,s.wg)(),(0,s.iD)("div",ve,[ke,(0,s._)("div",{class:"LoginBtn",onClick:o[0]||(o[0]=(...e)=>c.googleLogin&&c.googleLogin(...e))}," 使用Google登入 "),(0,s._)("div",{class:"LoginBtn",onClick:o[1]||(o[1]=(...e)=>c.facebookLogin&&c.facebookLogin(...e))}," 使用Facebook登入 "),(0,s._)("div",{class:"LoginBtn",onClick:o[2]||(o[2]=(...e)=>c.back&&c.back(...e))}," 退出管理者中心 ")])):1==n.adminPage?((0,s.wg)(),(0,s.iD)("div",we,[_e,(0,s._)("h3",null,"歡迎: "+(0,d.zw)(n.userData[1].user.displayName)+" 登入本系統",1),(0,s._)("h4",null,(0,d.zw)(n.userData[1].user.email),1),(0,s._)("div",De,[(0,s._)("div",{class:(0,d.C_)(["btn",{active:0===n.pageView}]),onClick:o[3]||(o[3]=e=>n.pageView=0)},"查看資料",2),(0,s._)("div",{class:(0,d.C_)(["btn",{active:3===n.pageView}]),onClick:o[4]||(o[4]=e=>n.pageView=3)},"API更新資料",2),(0,s._)("div",{class:(0,d.C_)(["btn",{active:2===n.pageView}]),onClick:o[5]||(o[5]=e=>n.pageView=2)},"資料貢獻清冊",2),(0,s._)("div",{class:(0,d.C_)(["btn",{}]),onClick:o[6]||(o[6]=e=>c.loginOut())},"登出並離開")]),0==n.pageView?((0,s.wg)(),(0,s.iD)("div",fe,[(0,s.Wm)(l,{value:n.mapData,"expand-depth":5,boxed:"",sort:""},null,8,["value"])])):1==n.pageView?((0,s.wg)(),(0,s.iD)("div",be,[ye,(0,s._)("div",Ce,[(0,s._)("div",Me,[Ae,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":o[7]||(o[7]=e=>n.checkedFood=e),onChange:o[8]||(o[8]=e=>this.pathFood=e.target.selectedIndex)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.mapData,((e,o)=>((0,s.wg)(),(0,s.iD)("option",{key:o,value:e},(0,d.zw)(e.foodName.zh),9,xe)))),128))],544),[[i.bM,n.checkedFood]])]),(0,s.wy)((0,s._)("div",Se,[Re,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":o[9]||(o[9]=e=>n.checkedSection=e),onChange:o[10]||(o[10]=e=>this.pathSection=e.target.selectedIndex)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.checkedFood.section,((e,o)=>((0,s.wg)(),(0,s.iD)("option",{key:o,value:e},(0,d.zw)(e.name),9,Pe)))),128))],544),[[i.bM,n.checkedSection]])],512),[[i.F8,""!=n.checkedFood]]),(0,s.wy)((0,s._)("div",Fe,[Ie,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":o[11]||(o[11]=e=>n.checkedRoad=e),onChange:o[12]||(o[12]=e=>this.pathRoad=e.target.selectedIndex)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.checkedSection.road,((e,o)=>((0,s.wg)(),(0,s.iD)("option",{key:o,value:e},(0,d.zw)(e.MrtName),9,Be)))),128))],544),[[i.bM,n.checkedRoad]])],512),[[i.F8,""!=n.checkedSection]]),(0,s.wy)((0,s._)("div",He,[Ne,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":o[13]||(o[13]=e=>n.checkedStation=e),onChange:o[14]||(o[14]=e=>this.pathStation=e.target.selectedIndex)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.checkedRoad.station,((e,o)=>((0,s.wg)(),(0,s.iD)("option",{key:o,value:e},(0,d.zw)(e.name),9,Te)))),128))],544),[[i.bM,n.checkedStation]])],512),[[i.F8,""!=n.checkedRoad]]),(0,s._)("div",ze,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":o[15]||(o[15]=e=>n.shopName=e),placeholder:"請輸入店名",onBlur:o[16]||(o[16]=e=>c.notInput("shopName"))},null,544),[[i.nr,n.shopName]]),(0,s._)("p",null,"新增商店名稱為: "+(0,d.zw)(n.shopName),1)]),(0,s._)("div",Le,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":o[17]||(o[17]=e=>n.shopKm=e),placeholder:"請輸入公里",onBlur:o[18]||(o[18]=e=>c.notInput("shopKm"))},null,544),[[i.nr,n.shopKm]]),(0,s._)("p",null,"商店距離距站點為: "+(0,d.zw)(n.shopKm)+" 公里",1)]),(0,s._)("div",Ve,[(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":o[19]||(o[19]=e=>n.shopLink=e),onBlur:o[20]||(o[20]=e=>c.notInput("shopLink")),placeholder:"請貼上google地圖連結"},null,544),[[i.nr,n.shopLink]]),(0,s._)("p",null,[Ue,je,(0,s.Uk)(" "+(0,d.zw)(n.shopLink),1)])]),(0,s._)("div",Ke,[(0,s.wy)((0,s._)("input",{type:"checkbox",onChange:o[21]||(o[21]=e=>c.finalCheck()),id:"checkbox","onUpdate:modelValue":o[22]||(o[22]=e=>n.checked=e)},null,544),[[i.e8,n.checked]]),Oe]),(0,s._)("div",Ee,(0,d.zw)(n.errMsg),1),(0,s._)("div",$e,[(0,s._)("div",{onClick:o[23]||(o[23]=(...e)=>c.sendData&&c.sendData(...e)),class:(0,d.C_)(["btn-11",{disabled:!n.checked}])},"送出更新商店",2)])])])):2==n.pageView?((0,s.wg)(),(0,s.iD)("div",Ge,[(0,s.Wm)(l,{value:n.mapDataList,"expand-depth":5,boxed:"",sort:""},null,8,["value"])])):3==n.pageView?((0,s.wg)(),(0,s.iD)("div",Ye,[qe,(0,s._)("div",We,[(0,s._)("div",Ze,[Je,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":o[24]||(o[24]=e=>n.checkedFood=e),onChange:o[25]||(o[25]=e=>this.pathFood=e.target.selectedIndex)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.mapData,((e,o)=>((0,s.wg)(),(0,s.iD)("option",{key:o,value:e},(0,d.zw)(e.foodName.zh),9,Qe)))),128))],544),[[i.bM,n.checkedFood]])]),(0,s.wy)((0,s._)("div",Xe,[eo,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":o[26]||(o[26]=e=>n.checkedSection=e),onChange:o[27]||(o[27]=e=>this.pathSection=e.target.selectedIndex)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.checkedFood.section,((e,o)=>((0,s.wg)(),(0,s.iD)("option",{key:o,value:e},(0,d.zw)(e.name),9,oo)))),128))],544),[[i.bM,n.checkedSection]])],512),[[i.F8,""!=n.checkedFood]]),(0,s.wy)((0,s._)("div",to,[ao,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":o[28]||(o[28]=e=>n.checkedRoad=e),onChange:o[29]||(o[29]=e=>this.pathRoad=e.target.selectedIndex)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.checkedSection.road,((e,o)=>((0,s.wg)(),(0,s.iD)("option",{key:o,value:e},(0,d.zw)(e.MrtName),9,io)))),128))],544),[[i.bM,n.checkedRoad]])],512),[[i.F8,""!=n.checkedSection]]),(0,s.wy)((0,s._)("div",so,[no,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":o[30]||(o[30]=e=>n.checkedStation=e),onChange:o[31]||(o[31]=e=>this.pathStation=e.target.selectedIndex)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.checkedRoad.station,((e,o)=>((0,s.wg)(),(0,s.iD)("option",{key:o,value:e},(0,d.zw)(e.name),9,co)))),128))],544),[[i.bM,n.checkedStation]])],512),[[i.F8,""!=n.checkedRoad]]),(0,s._)("div",lo,[(0,s.wy)((0,s._)("input",{type:"checkbox",onChange:o[32]||(o[32]=e=>c.APIitemCheck()),id:"checkbox2","onUpdate:modelValue":o[33]||(o[33]=e=>n.checked2=e)},null,544),[[i.e8,n.checked2]]),ro]),(0,s._)("div",ho,[(0,s._)("div",{class:(0,d.C_)(["APIsendBtn",{active:n.isNotGetData}]),onClick:o[34]||(o[34]=(...e)=>c.findShopButtonPressed&&c.findShopButtonPressed(...e))}," 使用google API新增商店 ",2)]),(0,s._)("div",po,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.placesData,((e,o)=>((0,s.wg)(),(0,s.iD)("div",{class:"dataItem",key:o},[(0,s._)("div",null,"商店名稱:"+(0,d.zw)(e.name),1),(0,s._)("div",null,"placeID:"+(0,d.zw)(e.place_id),1)])))),128))]),(0,s._)("div",uo,[(0,s._)("div",{class:(0,d.C_)(["APIsendBtn",{active:n.isMoredData}]),onClick:o[35]||(o[35]=(...e)=>c.NextPageButtonPressed&&c.NextPageButtonPressed(...e))}," 載入更多資料 ",2)]),(0,s._)("div",mo,[(0,s.wy)((0,s._)("input",{type:"checkbox",onChange:o[36]||(o[36]=e=>c.APIfinalCheck()),id:"checkbox","onUpdate:modelValue":o[37]||(o[37]=e=>n.checked=e)},null,544),[[i.e8,n.checked]]),go]),(0,s._)("div",vo,(0,d.zw)(n.errMsg),1),(0,s._)("div",ko,[(0,s._)("div",{onClick:o[38]||(o[38]=(...e)=>c.sendAPIData&&c.sendAPIData(...e)),class:(0,d.C_)(["btn-11",{disabled:!n.checked}])},"送出更新商店",2)])])])):(0,s.kq)("",!0)])):(0,s.kq)("",!0),(0,s._)("div",{class:(0,d.C_)(["popup",{active:n.popup}])},[(0,s._)("h3",null,(0,d.zw)(n.popMsg),1)],2)])}var _o=t(1178),Do=t(8865),fo=t.n(Do),bo=t(4028),yo=t(6265),Co=t.n(yo),Mo={name:"adminPage",components:{JsonViewer:fo()},data(){return{mapData:[],mapDataList:[],pageView:0,shopName:"",shopKm:"",shopLink:"",shopID:"",checked:"",checked2:"",checkedFood:[],pathFood:"",checkedSection:[],pathSection:"",checkedRoad:[],pathRoad:"",checkedStation:[],pathStation:"",adminPage:0,userData:[],errorUserData:[],errMsg:"",popup:!1,popMsg:"",lat:"",lng:"",type:"restaurant",keyword:"",radius:"0.7",places:[],placesData:[],isNotGetData:!1,isMoredData:!1}},watch:{errMsg(e){""!==e&&(this.checked=!1)}},methods:{back(){this.$emit("goToHome"),this.userData=[],this.adminPage=0},loginOut(){this.adminPage=0,this.userData=[]},upDataTheMap(e,o,t,a,i,s,n,c){const d=(0,_o.N8)(Bo),l={shopName:e,shopKm:o,shopLink:t},r={};return r["/mapData/"+a+"/section/"+i+"/road/"+s+"/station/"+n+"/shop/"+c]=l,(0,_o.Vx)((0,_o.iH)(d),r)},upDataAPIMap(e,o,t,a,i,s,n){const c=(0,_o.N8)(Bo),d={shopName:i,shopID:s},l={};return l["/mapAPIData/"+e+"/section/"+o+"/road/"+t+"/station/"+a+"/shop/"+n]=d,(0,_o.Vx)((0,_o.iH)(c),l)},upDataTheList(e,o,t,a,i,s,n,c){const d=(0,_o.N8)(Bo),l={Updater:this.userData[1].user.displayName,UpdatePersonMail:this.userData[1].user.email,UpdateTime:this.userData[1].user.metadata.lastSignInTime,shopName:e,shopKm:o,shopLink:t,shopPath:"/mapData/"+a+"/section/"+i+"/road/"+s+"/station/"+n+"/shop/"+c},r=(0,_o.VF)((0,_o.iU)((0,_o.iH)(d),"posts")).key,h={};return h["/Update-data-list/"+this.userData[1].user.uid+"/"+r]=l,(0,_o.Vx)((0,_o.iH)(d),h)},sendData(){if(!0===this.checked){let e=this.checkedStation.shop.length;this.upDataTheMap(this.shopName,this.shopKm,this.shopLink,this.pathFood,this.pathSection,this.pathRoad,this.pathStation,e),this.upDataTheList(this.shopName,this.shopKm,this.shopLink,this.pathFood,this.pathSection,this.pathRoad,this.pathStation,e),this.shopName="",this.shopKm="",this.shopLink="",this.checked=!1,this.setPopup("1000"),this.popMsg="感謝您的資料提供！"}},sendAPIData(){if(!0===this.checked){const e=e=>new Promise((o=>setTimeout(o,e)));this.placesData.forEach((async(o,t)=>{await e(50),this.upDataAPIMap(this.pathFood,this.pathSection,this.pathRoad,this.pathStation,o.name,o.place_id,t)})),this.checked=!1,this.setPopup("1000"),this.popMsg="感謝您的資料提供！"}},googleLogin(){const e=new bo.hJ,o=(0,bo.v0)(Bo);(0,bo.rh)(o,e).then((e=>{const o=bo.hJ.credentialFromResult(e),t=o.accessToken,a=e.user;this.userData=[{token:t},{user:a}],this.adminPage=1})).catch((e=>{const o=e.code,t=e.message,a=e.customData.email,i=bo.hJ.credentialFromError(e);this.errorUserData=[{errorCode:o},{errorMessage:t},{email:a},{credential:i}],this.setPopup("3000"),this.popMsg="您的帳號似乎無法使用！"+this.errorUserData[1].errorMessage}))},facebookLogin(){const e=new bo._O,o=(0,bo.v0)(Bo);(0,bo.rh)(o,e).then((e=>{const o=bo._O.credentialFromResult(e),t=o.accessToken,a=e.user;this.userData=[{token:t},{user:a}],this.adminPage=1})).catch((e=>{const o=e.code,t=e.message,a=e.customData.email,i=bo._O.credentialFromError(e);this.errorUserData=[{errorCode:o},{errorMessage:t},{email:a},{credential:i}],this.setPopup("3000"),this.popMsg="您的帳號似乎無法使用！"+this.errorUserData[1].errorMessage}))},notInput(e){switch(e){case"shopName":""===this.shopName?this.errMsg="沒有輸入名稱":this.errMsg="";break;case"shopKm":""===this.shopKm?this.errMsg="沒有輸入公里":this.errMsg="";break;case"shopLink":""===this.shopLink?this.errMsg="沒有輸入連結":this.errMsg="";break}},APIitemCheck(){""===this.pathFood||""===this.pathSection||""===this.pathRoad||""===this.pathStation?(this.checked2=!1,this.errMsg="選項沒有填寫完畢"):(this.errMsg="",this.isNotGetData=!0,this.keyword=this.checkedFood.keyWord,this.lat=this.checkedStation.lat,this.lng=this.checkedStation.lng)},finalCheck(){""!==this.pathFood&&""!==this.pathSection&&""!==this.pathRoad&&""!==this.pathStation&&""!==this.shopName&&""!==this.shopKm&&""!==this.shopLink||(this.checked=!1,this.errMsg="選項沒有填寫完畢")},APIfinalCheck(){0===this.placesData.length?(this.errMsg="資料尚未生成",this.checked=!1):(this.errMsg="",this.checked=!0)},setPopup(e){this.popup=!0,setTimeout((()=>{this.popup=!1,this.popMsg=""}),e)},findShopButtonPressed(){if(!1===this.checked2)return;this.isNotGetData=!1;const e=`https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=\n      ${this.lat}, ${this.lng}&type=${this.type}&radius=${1e3*this.radius}&keyword=${this.keyword}&key=AIzaSyC5uof5o5rNtVVCbtL-iBPg03piPrOw5Xw&language=zh-TW`;Co().get(e).then((e=>{this.places=e.data,this.placesData=e.data.results,void 0!==this.places.next_page_token&&(this.isMoredData=!0)})).catch((e=>{console.log(e.message)}))},NextPageButtonPressed(){if(void 0!==this.places.next_page_token){const e=`https://maps.googleapis.com/maps/api/place/nearbysearch/json?pagetoken=${this.places.next_page_token}&key=AIzaSyC5uof5o5rNtVVCbtL-iBPg03piPrOw5Xw`;Co().get(e).then((e=>{this.places=e.data,this.placesData=this.placesData.concat(e.data.results),void 0===this.places.next_page_token&&(this.isMoredData=!1)})).catch((e=>{console.log(e.message)}))}},DetailsButtonPressed(){const e="https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/place/details/json?place_id=ChIJPxnPnrCrQjQRmEwUNrIViu0&language=zh-TW&key=AIzaSyCHb6eKPBxhkTcIfsoPu4RoTPw64gTVLDQ";Co().get(e).then((e=>{this.places=e.data,console.log("Details",this.places)})).catch((e=>{console.log(e.message)}))}},mounted:function(){const e=(0,_o.N8)(Bo),o=(0,_o.iH)(e,"/mapAPIData");(0,_o.jM)(o,(e=>{const o=e.val();this.mapData=o}),{onlyOnce:!1});const t=(0,_o.iH)(e,"/Update-data-list");(0,_o.jM)(t,(e=>{const o=e.val();this.mapDataList=o}),{onlyOnce:!1})}};const Ao=(0,C.Z)(Mo,[["render",wo],["__scopeId","data-v-670f7222"]]);var xo=Ao,So={name:"App",components:{HomePage:A,FoodMap:ue,adminPage:xo},mixins:[],data(){return{AllData:[],picMapRoad:[],picFoodColor:"",picFoodName:[],picFoodMap:[],isHomePage:!0,isAdmin:!1}},watch:{},computed:{},methods:{takeActiveData(e,o,t,a){this.picMapRoad=e,this.picFoodColor=o,this.picFoodName=t,this.picFoodMap=a,this.isHomePage=!1},backToHome(){this.isHomePage=!0},AdminBase(){this.isHomePage=!1,this.isAdmin=!0},goToHome(){this.isHomePage=!0,this.isAdmin=!1}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){document.oncontextmenu=new Function("return false"),oncontextmenu="return false;";const e=(0,_o.iH)((0,_o.N8)(Bo));(0,_o.U2)((0,_o.iU)(e,"/")).then((e=>{e.exists()?this.AllData=e.val().mapAPIData:console.log("No data available")})).catch((e=>{console.error(e)}))},beforeUpdate:function(){},updated:function(){}};const Ro=(0,C.Z)(So,[["render",c]]);var Po=Ro,Fo=t(4275);const Io={apiKey:"AIzaSyC6dkovWp69HCGnOyr7UGZfFajEWTxfVQU",authDomain:"foomap-b6c13.firebaseapp.com",databaseURL:"https://foomap-b6c13-default-rtdb.firebaseio.com",projectId:"foomap-b6c13",storageBucket:"foomap-b6c13.appspot.com",messagingSenderId:"993502935332",appId:"1:993502935332:web:e81cdc25db4f5397de5bb1",measurementId:"G-JLKVC8GG74"},Bo=(0,Fo.ZF)(Io);(0,i.ri)(Po).mount("#app")}},o={};function t(a){var i=o[a];if(void 0!==i)return i.exports;var s=o[a]={exports:{}};return e[a].call(s.exports,s,s.exports,t),s.exports}t.m=e,function(){var e=[];t.O=function(o,a,i,s){if(!a){var n=1/0;for(r=0;r<e.length;r++){a=e[r][0],i=e[r][1],s=e[r][2];for(var c=!0,d=0;d<a.length;d++)(!1&s||n>=s)&&Object.keys(t.O).every((function(e){return t.O[e](a[d])}))?a.splice(d--,1):(c=!1,s<n&&(n=s));if(c){e.splice(r--,1);var l=i();void 0!==l&&(o=l)}}return o}s=s||0;for(var r=e.length;r>0&&e[r-1][2]>s;r--)e[r]=e[r-1];e[r]=[a,i,s]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var a in o)t.o(o,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:o[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p=""}(),function(){var e={143:0};t.O.j=function(o){return 0===e[o]};var o=function(o,a){var i,s,n=a[0],c=a[1],d=a[2],l=0;if(n.some((function(o){return 0!==e[o]}))){for(i in c)t.o(c,i)&&(t.m[i]=c[i]);if(d)var r=d(t)}for(o&&o(a);l<n.length;l++)s=n[l],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return t.O(r)},a=self["webpackChunkfoomap"]=self["webpackChunkfoomap"]||[];a.forEach(o.bind(null,0)),a.push=o.bind(null,a.push.bind(a))}();var a=t.O(void 0,[998],(function(){return t(712)}));a=t.O(a)})();
//# sourceMappingURL=app.22b8ca93.js.map